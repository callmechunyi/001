<!DOCTYPE html>
<html>
<head>
    <title>ç”µå·¥å€’ç­ç®¡ç†ç³»ç»Ÿï¼ˆæ”¯æŒå‘¨è½®æ¢ï¼‰</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: "Microsoft YaHei", Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 100%;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        .header h1 {
            color: #333;
            font-size: 24px;
            margin-bottom: 10px;
        }
        .date-info {
            font-size: 16px;
            color: #666;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .week-info {
            font-size: 16px;
            color: #fff;
            background: #e91e63;
            padding: 10px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }
        .time-slots {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 10px;
        }
        .time-slot {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            color: white;
            font-weight: bold;
        }
        .morning-slot { background: #4CAF50; }
        .middle-slot { background: #2196F3; }
        .night-slot { background: #FF9800; }
        
        .main-display {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .current-shift {
            flex: 1;
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            border-radius: 15px;
            padding: 20px;
        }
        .next-shift {
            flex: 1;
            background: linear-gradient(135deg, #2196F3, #0D47A1);
            color: white;
            border-radius: 15px;
            padding: 20px;
        }
        
        .shift-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .electrician-card {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }
        .avatar {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }
        .info-details h3 {
            font-size: 22px;
            margin-bottom: 5px;
        }
        .team-badge {
            display: inline-block;
            background: rgba(255,255,255,0.3);
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-bottom: 5px;
        }
        .phone {
            font-size: 18px;
            font-weight: bold;
            margin-top: 5px;
        }
        .shift-time {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .contact-btn {
            display: block;
            width: 100%;
            background: white;
            color: #4CAF50;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            margin-top: 20px;
            text-decoration: none;
            text-align: center;
            cursor: pointer;
        }
        .next-contact-btn {
            background: white;
            color: #2196F3;
        }
        
        .footer-info {
            text-align: center;
            color: #888;
            font-size: 12px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .main-display {
                flex-direction: column;
            }
            .time-slots {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ ç”µå·¥å€’ç­ç®¡ç†ç³»ç»Ÿï¼ˆæ”¯æŒå‘¨è½®æ¢ï¼‰</h1>
            <div class="date-info" id="dateTime">2025å¹´12æœˆ25æ—¥ æ˜ŸæœŸå››<br><span id="currentTime">10:14:36</span></div>
            <div class="week-info" id="weekInfo">ç¬¬52å‘¨ | å½“å‰ç­ç»„è½®æ¢å‘¨æœŸ</div>
        </div>
        
        <div class="time-slots">
            <div class="time-slot morning-slot">æ—©ç­ (8:00-16:00)</div>
            <div class="time-slot middle-slot">ä¸­ç­ (16:00-24:00)</div>
            <div class="time-slot night-slot">å¤œç­ (0:00-8:00)</div>
        </div>
        
        <div class="main-display">
            <!-- å½“å‰ç­æ¬¡ -->
            <div class="current-shift">
                <div class="shift-title">
                    <div style="background: white; color: #4CAF50; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">æ—©</div>
                    æ—©ç­ å€¼ç­ç”µå·¥
                </div>
                
                <div class="electrician-card">
                    <div class="avatar" id="currentAvatar">è¿</div>
                    <div class="info-details">
                        <h3 id="currentName">è¿äºŒå®</h3>
                        <div class="team-badge" id="currentTeam">ä¹™ç­</div>
                        <div class="phone" id="currentPhone">186-3366-8513</div>
                        <div class="shift-time">å€¼ç­æ—¶é—´: 8:00-16:00</div>
                    </div>
                </div>
                
                <a href="tel:18633668513" class="contact-btn" id="callBtn">
                    ğŸ“ ç«‹å³è”ç³» è¿äºŒå® | (186****8513)
                </a>
            </div>
            
            <!-- ä¸‹ä¸€ç­ -->
            <div class="next-shift">
                <div class="shift-title">
                    <div style="background: white; color: #2196F3; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">ä¸­</div>
                    ä¸‹ä¸€ç­: ä¸­ç­
                </div>
                
                <div class="electrician-card">
                    <div class="avatar" id="nextAvatar">å¼ </div>
                    <div class="info-details">
                        <h3 id="nextName">å¼ æœ‰å·</h3>
                        <div class="team-badge" id="nextTeam">ä¸™ç­</div>
                        <div class="phone" id="nextPhone">159-8729-6857</div>
                        <div class="shift-time">æ¥ç­æ—¶é—´: 16:00å¼€å§‹</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-info">
            â° ç³»ç»Ÿå®æ—¶æ›´æ–° | æœ€åæ›´æ–°: <span id="lastUpdate">10:14:36</span> | ä¸‹æ¬¡è½®æ¢: <span id="nextRotation">2026å¹´1æœˆ1æ—¥ (å‘¨ä¸€)</span>
        </div>
    </div>

    <script>
        // ç”µå·¥ä¿¡æ¯é…ç½®
        const electricians = [
            { team: "ä¹™ç­", name: "è¿äºŒå®", phone: "18633668513", avatar: "è¿" },
            { team: "ä¸™ç­", name: "å¼ æœ‰å·", phone: "15987296857", avatar: "å¼ " },
            { team: "ç”²ç­", name: "æœ±æ£®å‘", phone: "13737242404", avatar: "æœ±" }
        ];

        // ç­æ¬¡æ—¶é—´é…ç½®
        const shiftTimes = {
            morning: { name: "æ—©ç­", start: 8, end: 16, color: "#4CAF50" },
            middle: { name: "ä¸­ç­", start: 16, end: 24, color: "#2196F3" },
            night: { name: "å¤œç­", start: 0, end: 8, color: "#FF9800" }
        };

        // æ ¼å¼åŒ–ç”µè¯
        function formatPhone(phone) {
            if (phone.length === 11) {
                return phone.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
            }
            return phone;
        }

        // è·å–éšè—ç”µè¯å·ç 
        function getHiddenPhone(phone) {
            if (phone.length === 11) {
                return phone.substring(0, 3) + '****' + phone.substring(7);
            }
            return phone;
        }

        // è·å–å½“å‰å‘¨æ•°ï¼ˆISOå‘¨æ•°ï¼‰
        function getWeekNumber(date) {
            const d = new Date(date);
            d.setHours(0, 0, 0, 0);
            d.setDate(d.getDate() + 4 - (d.getDay() || 7));
            const yearStart = new Date(d.getFullYear(), 0, 1);
            const weekNo = Math.ceil(((d - yearStart) / 86400000 + 1) / 7);
            return weekNo;
        }

        // æ ¹æ®å‘¨æ•°ç¡®å®šå½“å‰è½®æ¢ç­ç»„
        function getCurrentRotation(weekNumber) {
            // ä½¿ç”¨å‘¨æ•°æ¨¡3æ¥ç¡®å®šå½“å‰æ˜¯å“ªä¸ªç­ç»„
            return weekNumber % 3;
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentSecond = now.getSeconds();
            const weekNumber = getWeekNumber(now);
            const rotationIndex = getCurrentRotation(weekNumber);
            
            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            const dateStr = now.toLocaleDateString('zh-CN', { 
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                weekday: 'long'
            });
            
            const timeStr = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            
            document.getElementById('dateTime').innerHTML = `
                ${dateStr}<br>
                <span id="currentTime" style="font-size: 20px; font-weight: bold;">${timeStr}</span>
            `;
            
            // æ›´æ–°å‘¨ä¿¡æ¯
            document.getElementById('weekInfo').textContent = `ç¬¬${weekNumber}å‘¨ | å½“å‰ä¸»å¯¼ç­ç»„: ${electricians[rotationIndex].team}`;
            
            // æ ¹æ®æ—¶é—´ç¡®å®šå½“å‰ç­æ¬¡
            let currentShiftName, currentIndex, nextShiftName, nextIndex;
            
            if (currentHour >= 8 && currentHour < 16) {
                // å½“å‰æ˜¯æ—©ç­ (8:00-16:00)
                currentShiftName = "æ—©ç­";
                currentIndex = rotationIndex; // å½“å‰å‘¨ä¸»å¯¼ç­ç»„ä¸Šæ—©ç­
                nextShiftName = "ä¸­ç­";
                nextIndex = (rotationIndex + 1) % 3; // ä¸‹ä¸€ä¸ªç­ç»„ä¸Šä¸­ç­
            } else if (currentHour >= 16 || currentHour < 0) {
                // å½“å‰æ˜¯ä¸­ç­ (16:00-24:00) æˆ–å¤œç­ (0:00-8:00)
                if (currentHour >= 16 && currentHour < 24) {
                    currentShiftName = "ä¸­ç­";
                    currentIndex = (rotationIndex + 1) % 3; // ä¸‹ä¸€ä¸ªç­ç»„ä¸Šä¸­ç­
                    nextShiftName = "å¤œç­";
                    nextIndex = (rotationIndex + 2) % 3; // ç¬¬ä¸‰ä¸ªç­ç»„ä¸Šå¤œç­
                } else {
                    currentShiftName = "å¤œç­";
                    currentIndex = (rotationIndex + 2) % 3; // ç¬¬ä¸‰ä¸ªç­ç»„ä¸Šå¤œç­
                    nextShiftName = "æ—©ç­";
                    nextIndex = rotationIndex; // å½“å‰å‘¨ä¸»å¯¼ç­ç»„ä¸Šæ—©ç­
                }
            }
            
            // æ›´æ–°å½“å‰ç­æ¬¡ä¿¡æ¯
            const current = electricians[currentIndex];
            const currentShiftDiv = document.querySelector('.current-shift');
            const currentShiftTitle = document.querySelector('.current-shift .shift-title');
            
            // æ ¹æ®ç­æ¬¡æ›´æ–°æ ·å¼
            if (currentShiftName === "æ—©ç­") {
                currentShiftDiv.style.background = "linear-gradient(135deg, #4CAF50, #2E7D32)";
                currentShiftTitle.innerHTML = `
                    <div style="background: white; color: #4CAF50; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">æ—©</div>
                    æ—©ç­ å€¼ç­ç”µå·¥
                `;
            } else if (currentShiftName === "ä¸­ç­") {
                currentShiftDiv.style.background = "linear-gradient(135deg, #2196F3, #0D47A1)";
                currentShiftTitle.innerHTML = `
                    <div style="background: white; color: #2196F3; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">ä¸­</div>
                    ä¸­ç­ å€¼ç­ç”µå·¥
                `;
            } else {
                currentShiftDiv.style.background = "linear-gradient(135deg, #FF9800, #EF6C00)";
                currentShiftTitle.innerHTML = `
                    <div style="background: white; color: #FF9800; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">å¤œ</div>
                    å¤œç­ å€¼ç­ç”µå·¥
                `;
            }
            
            document.getElementById('currentName').textContent = current.name;
            document.getElementById('currentTeam').textContent = current.team;
            document.getElementById('currentPhone').textContent = formatPhone(current.phone);
            document.getElementById('currentAvatar').textContent = current.avatar;
            
            // æ›´æ–°ä¸‹ä¸€ç­ä¿¡æ¯
            const next = electricians[nextIndex];
            const nextShiftDiv = document.querySelector('.next-shift');
            const nextShiftTitle = document.querySelector('.next-shift .shift-title');
            
            if (nextShiftName === "ä¸­ç­") {
                nextShiftDiv.style.background = "linear-gradient(135deg, #2196F3, #0D47A1)";
                nextShiftTitle.innerHTML = `
                    <div style="background: white; color: #2196F3; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">ä¸­</div>
                    ä¸‹ä¸€ç­: ä¸­ç­
                `;
            } else if (nextShiftName === "å¤œç­") {
                nextShiftDiv.style.background = "linear-gradient(135deg, #FF9800, #EF6C00)";
                nextShiftTitle.innerHTML = `
                    <div style="background: white; color: #FF9800; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">å¤œ</div>
                    ä¸‹ä¸€ç­: å¤œç­
                `;
            } else {
                nextShiftDiv.style.background = "linear-gradient(135deg, #4CAF50, #2E7D32)";
                nextShiftTitle.innerHTML = `
                    <div style="background: white; color: #4CAF50; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">æ—©</div>
                    ä¸‹ä¸€ç­: æ—©ç­
                `;
            }
            
            document.getElementById('nextName').textContent = next.name;
            document.getElementById('nextTeam').textContent = next.team;
            document.getElementById('nextPhone').textContent = formatPhone(next.phone);
            document.getElementById('nextAvatar').textContent = next.avatar;
            
            // æ›´æ–°æ‹¨å·é“¾æ¥
            const callBtn = document.getElementById('callBtn');
            callBtn.href = `tel:${current.phone}`;
            callBtn.textContent = `ğŸ“ ç«‹å³è”ç³» ${current.name} | (${getHiddenPhone(current.phone)})`;
            
            // æ›´æ–°ç­æ¬¡æ—¶é—´æ˜¾ç¤º
            const currentShiftTime = document.querySelector('.current-shift .shift-time');
            const nextShiftTime = document.querySelector('.next-shift .shift-time');
            
            if (currentShiftName === "æ—©ç­") {
                currentShiftTime.textContent = "å€¼ç­æ—¶é—´: 8:00-16:00";
                nextShiftTime.textContent = "æ¥ç­æ—¶é—´: 16:00å¼€å§‹";
            } else if (currentShiftName === "ä¸­ç­") {
                currentShiftTime.textContent = "å€¼ç­æ—¶é—´: 16:00-24:00";
                nextShiftTime.textContent = "æ¥ç­æ—¶é—´: 24:00å¼€å§‹";
            } else {
                currentShiftTime.textContent = "å€¼ç­æ—¶é—´: 0:00-8:00";
                nextShiftTime.textContent = "æ¥ç­æ—¶é—´: 8:00å¼€å§‹";
            }
            
            // è®¡ç®—ä¸‹æ¬¡è½®æ¢æ—¶é—´ï¼ˆä¸‹å‘¨ä¸€ï¼‰
            const nextMonday = new Date(now);
            const daysUntilMonday = (1 + 7 - now.getDay()) % 7;
            nextMonday.setDate(now.getDate() + (daysUntilMonday === 0 ? 7 : daysUntilMonday));
            nextMonday.setHours(0, 0, 0, 0);
            
            const nextRotationStr = nextMonday.toLocaleDateString('zh-CN', { 
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                weekday: 'long'
            });
            
            // æ›´æ–°æœ€ååˆ·æ–°æ—¶é—´å’Œä¸‹æ¬¡è½®æ¢æ—¶é—´
            document.getElementById('lastUpdate').textContent = timeStr;
            document.getElementById('nextRotation').textContent = nextRotationStr;
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            updateDisplay();
            // æ¯ç§’æ›´æ–°ä¸€æ¬¡
            setInterval(updateDisplay, 1000);
        });

        // ç¦æ­¢å³é”®å’ŒF12
        document.addEventListener('contextmenu', (e) => e.preventDefault());
        document.onkeydown = (e) => {
            if (e.key === 'F12') return false;
        };
    </script>
</body>
</html>
